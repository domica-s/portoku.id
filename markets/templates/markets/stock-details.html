{% extends 'markets/base/base.html' %}

{% load static %}

{% block title %}Portoku.id - {{ name }}{% endblock %}

{% block site_css %}
    <link rel="stylesheet" href="{% static 'markets/styles/stock-details.css' %}">
{% endblock %}

{% block content %}
    <br>
    <div class="container">
        <div class="row">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item"><a href="/stock">Stocks</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{ name }}</li>
                </ol>
            </nav>
        </div>
        <div class="row">
            <div class="col-6"><h1>{{ name }}</h1></div>
            <div class="col-3"><h2>{{ price }}</h2></div>
            <div class="col-3"><h2>24% change</h2></div>
        </div>
        <div class="row">
            <div class="col-12"><h3>{{ fullname }}</h3></div>
        </div>
    </div>

    <br>
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab" aria-controls="overview" aria-selected="true">Overview</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="key-statistics-tab" data-bs-toggle="tab" data-bs-target="#key-statistics" type="button" role="tab" aria-controls="key-statistics" aria-selected="false">Key Statistics</button>
        </li>
    </ul>

    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
            <section>
                Add static details here
            </section>
        </div>
        <div class="tab-pane fade" id="key-statistics" role="tabpanel" aria-labelledby="key-statistics-tab">
            <section>
                Add fundamentals and book values
            </section>
        </div>
    </div>

    <img src="data:image/png;base64,{{ data }}" alt="{{ name }} - chart" height="300", width="400">
{% endblock %}

{% block javascript %}
<<<<<<< HEAD
    <script>
        var interval = 1000 * 60 * 5;
        var webSlug = "{{ name }}"
        $(document).ready(function() {
            setInterval(function() {
                $.ajax({
                    type: 'POST',
                    url: '{% url "getUpdatedStockPrice" %}',
                    data: {
                     'slug': webSlug,
                     'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function(response) {
                        console.log("Updating price to : " + response['price']);
                        $("#price").empty();
                        $("#price").append(response['price']);
                    },
                    error: function(response) {
                        alert("An error occured: " + response);
                    }
                });
            }, interval);
        })
    </script>
=======
    <script src="{% static 'markets/scripts/stock-details.js' %}"></script>
>>>>>>> improve_table
{% endblock %}

